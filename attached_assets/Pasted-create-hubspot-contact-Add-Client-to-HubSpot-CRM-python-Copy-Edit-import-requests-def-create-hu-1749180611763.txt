create_hubspot_contact() â€“ Add Client to HubSpot CRM
python
Copy
Edit
import requests

def create_hubspot_contact(email, first_name, last_name, company_name, api_key):
    url = "https://api.hubapi.com/crm/v3/objects/contacts"
    headers = {
        "Authorization": f"Bearer {api_key}",
        "Content-Type": "application/json"
    }

    data = {
        "properties": {
            "email": email,
            "firstname": first_name,
            "lastname": last_name,
            "company": company_name
        }
    }

    response = requests.post(url, headers=headers, json=data)
    if not response.ok:
        print(f"HubSpot Error: {response.text}")
    return response.json()
ðŸ§  Inputs:

email, first_name, last_name, company_name from your parsed Tally webhook

api_key: Your HubSpot private app token (use Replit Secrets Manager)

âœ… create_qbo_invoice() â€“ Create Invoice in QuickBooks Online
python
Copy
Edit
def create_qbo_invoice(qbo_access_token, company_id, customer_id, amount, due_date, description):
    url = f"https://sandbox-quickbooks.api.intuit.com/v3/company/{company_id}/invoice?minorversion=65"
    headers = {
        "Authorization": f"Bearer {qbo_access_token}",
        "Accept": "application/json",
        "Content-Type": "application/json"
    }

    payload = {
        "CustomerRef": {
            "value": customer_id
        },
        "Line": [{
            "Amount": amount,
            "DetailType": "SalesItemLineDetail",
            "SalesItemLineDetail": {
                "ItemRef": {
                    "value": "1",  # Change if you use specific item IDs
                    "name": description
                }
            }
        }],
        "DueDate": due_date,
        "PrivateNote": "Auto-generated by YoBotÂ® Sales Order Flow"
    }

    response = requests.post(url, headers=headers, json=payload)
    if not response.ok:
        print(f"QuickBooks Error: {response.text}")
    return response.json()
ðŸ§  Inputs:

access_token: from your QBO OAuth flow

company_id: your QuickBooks Company ID

customer_id: obtained from QBO when contact is created

amount, due_date, description: from Tally form logic

âœ… Drop into Your Webhook Handler
Right after PDF + Airtable push, insert:

python
Copy
Edit
create_hubspot_contact(contact_email, first_name, last_name, company_name, hubspot_api_key)

create_qbo_invoice(
    qbo_access_token, company_id, qbo_customer_id,
    amount=total_paid, due_date="2025-06-15", description=quote_number
)
