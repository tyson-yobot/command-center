# ğŸ§  YoBotÂ® Scraper Tool â€” Final Spec for Replit Devs

This document defines **exactly what needs to be done** for each lead scraper module (Apollo, Apify, PhantomBuster) to ensure full functionality, perfect UX, cross-platform compatibility, and scalability for global deployment.

---

## âœ… Universal Requirements (Apply to All Tools)

* Group filters into logical sections
* Use consistent layout (2-column grid with left/right balance)
* All dropdowns must support default value + full label names
* Every input field should have a label and an optional tooltip ("?")
* Filters should be grouped into sections:

  * ğŸ§‘ Contact Filters
  * ğŸ¢ Company/Business Filters
  * âš™ï¸ Scraping Settings
* Include bottom bar with:

  * ğŸ”„ Filter summary (e.g. â€œ7 filters appliedâ€)
  * â± Estimated leads (optional if backend can return estimate)
  * ğŸ’¾ Save preset button
  * ğŸš€ Launch button (sticky footer on scroll)
* Toggle between **Test Company Mode** (fake data, instant) vs **YoBot Live Mode** (real scraper)
* UI color scheme should match the rest of the **YoBotÂ® Command Center** (primary blue with tool-specific accents)
* âš ï¸ Replace placeholder color boxes (black/purple/green backgrounds) with **Command Center-compliant dark navy base** with soft gradients

---

## ğŸ§‘â€ğŸ¨ NEW: Embedded Content Creator Module (Marketing Tool)

> Purpose: Give team members the ability to write flyers, social posts, and schedule Mailchimp campaigns **directly inside the dashboard**, without needing to log in elsewhere.

### Features:

* âœï¸ Content Drafting UI

  * Rich text editor w/ headline, body, CTA
  * Drag-and-drop template builder
  * Emoji + branded color selector

* ğŸ–¼ï¸ Asset Upload + Preview

  * Upload image/video for post
  * Preview format (Facebook, Instagram, Email)

* ğŸ“¤ Publish Options:

  * ğŸ“… Schedule post now/later
  * Platform selector (IG, FB, X, LinkedIn, Mailchimp)
  * Test Mode toggle (test send to Slack/email)

* ğŸ” Campaign Logger â†’ Airtable

  * Logs post title, content, platform, target audience, and status to `ğŸ“£ Social Campaign Log`

* ğŸ› ï¸ Mailchimp Integration:

  * API key pulled from secure Replit ENV
  * Uses Mailchimp Campaign API to schedule/send
  * Option to auto-sync content from CRM fields (e.g., client name, vertical)

---

## ğŸŸ¢ Required Replit-Side Components (ALL SYSTEMS)

### ğŸ”— 1. `/api/launch-scrape` (POST)

Handles all 3 platforms dynamically:

```json
{
  "tool": "apollo",  // or "apify", "phantom"
  "filters": { ... }  // full object of scraper config
}
```

* Triggers real scraper pipeline
* Returns: `{ success: true, leadCount: 128, leads: [...] }`
* Logs test to Airtable below

### ğŸ“¤ 2. Airtable Test Logger (Scraper + Any Flow)

```js
await fetch("https://api.airtable.com/v0/appRt8V3tH4g5Z5if/Integration%20Test%20Log", {
  method: "POST",
  headers: {
    "Authorization": `Bearer ${AIRTABLE_TOKEN}`,
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    fields: {
      "ğŸ§ª Integration Name": "Apollo Lead Scraper",
      "âœ… Pass/Fail": true,
      "ğŸ“ Notes / Debug": "Validated Slack + Airtable",
      "ğŸ“… Test Date": new Date().toISOString(),
      "ğŸ‘¤ QA Owner": "Daniel Sharpe",
      "ğŸ“¤ Output Data Populated?": true,
      "ğŸ“ Record Created?": true,
      "ğŸ” Retry Attempted?": false,
      "âš™ï¸ Module Type": "Scraper",
      "ğŸ”— Related Scenario Link": "https://replit.com/@YoBot/lead-scraper"
    }
  })
});
```

### ğŸ“© 3. Slack Webhook (On Success)

```js
await fetch("https://hooks.slack.com/services/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", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    text: `âœ… ${leadCount} leads scraped with *Apollo*
ğŸ“¥ Saved to Airtable Â· ğŸ”— <view URL>`
  })
});
```

### ğŸ“¤ 4. Airtable Sync (Scraped Leads)

```js
POST https://api.airtable.com/v0/appRt8V3tH4g5Z5if/tblXXXXXXXXXXXXXX
Headers: Authorization, Content-Type
Body:
{
  "fields": {
    "ğŸ§‘ Full Name": lead.fullName,
    "âœ‰ï¸ Email": lead.email,
    "ğŸ¢ Company Name": lead.company,
    "ğŸ’¼ Title": lead.title,
    "ğŸŒ Location": lead.location,
    "ğŸ“ Phone Number": lead.phone,
    "ğŸ­ Industry": lead.industry,
    "ğŸ”– Source Tag": `${source} - ${Date}`,
    "ğŸ†” Scrape Session ID": `scraper-${Date.now()}`,
    "ğŸ•’ Scraped Timestamp": new Date().toISOString()
  }
}
```

### ğŸ“¦ Optional: Export CSV

* Endpoint to bundle returned leads into downloadable CSV for client export
* Triggered by button in Intelligence Results view

---

## âœ… UX & Testing Expectations

* All components must log real test output
* No fake test JSON allowed unless `Test Company` toggle is active
* Use test tag in Airtable if run is from demo mode
* All failed tests (e.g. API timeout) must be logged with retry status = false

---

## ğŸ Global Go-Live Rules

| Requirement                             | âœ… Must Have |
| --------------------------------------- | ----------- |
| Real API scraping working               | âœ…           |
| Slack alert with lead count             | âœ…           |
| Airtable sync to correct table          | âœ…           |
| Test log in `Integration Test Log`      | âœ…           |
| Toggle for Test vs Live company mode    | âœ…           |
| CSV export button from results screen   | âœ…           |
| Embedded flyer + social media module    | âœ…           |
| Mailchimp API integration via dashboard | âœ…           |

Once this is done â€” YoBot has a production-grade scraper and marketing automation suite ready for enterprise rollout.
