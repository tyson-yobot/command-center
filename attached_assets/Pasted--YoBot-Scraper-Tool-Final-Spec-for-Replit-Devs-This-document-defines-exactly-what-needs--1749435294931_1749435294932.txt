# 🧠 YoBot® Scraper Tool — Final Spec for Replit Devs

This document defines **exactly what needs to be done** for each lead scraper module (Apollo, Apify, PhantomBuster) to ensure full functionality, perfect UX, cross-platform compatibility, and scalability for global deployment.

---

## ✅ Universal Requirements (Apply to All Tools)

* Group filters into logical sections
* Use consistent layout (2-column grid with left/right balance)
* All dropdowns must support default value + full label names
* Every input field should have a label and an optional tooltip ("?")
* Filters should be grouped into sections:

  * 🧑 Contact Filters
  * 🏢 Company/Business Filters
  * ⚙️ Scraping Settings / Execution Settings
* Include bottom bar with:

  * 🔄 Filter summary (e.g. “7 filters applied”)
  * ⏱ Estimated leads/profiles/listings (dynamic)
  * 💾 Save preset button
  * 🚀 Launch button (sticky footer on scroll)
* Toggle between **Test Company Mode** (fake data, instant) vs **YoBot Live Mode** (real scraper)
* Color scheme must match the **YoBot® Command Center**:

  * Apollo: Blue accent (💙)
  * Apify: Green accent (💚)
  * PhantomBuster: Purple accent (💜)
  * Base theme must always be **dark navy/gradient**, not harsh black
* Remove all legacy black, purple, or green panels — use dark navy with appropriate branding accents only
* Font sizes, labels, pill counts, and button spacing should match Command Center UI kit
* ✅ Ensure **all buttons work** (especially all "Add" buttons, dropdowns, and toggles)
* ✅ Replace “Twitter” references with **“X (formerly Twitter)”**
* ✅ Update PhantomBuster dropdown to say: Platform → `LinkedIn`, `X (formerly Twitter)`
* ✅ "Use API" option should say: **Use YoBot Dashboard** instead
* ✅ Email Verified / Phone Verified toggles should default to checked and reflect real verification before sending to HubSpot

---

## 🔵 Apollo.io Filters (Professional Configuration)

### 🧑 Contact Filters:

* Job Titles
* Seniority Level
* Department
* Location
* Email Verified (☑️)
* Phone Number Available (☑️)

### 🏢 Company Filters:

* Industry (should include: Technology, Healthcare, Finance, Education, Retail, Manufacturing, Consulting, Media & Entertainment — plus any missing verticals from the Industry Templates base)
* Company Size
* Funding Stage
* Revenue Range
* Technologies Used
* Exclude Domains/Companies

### ⚙️ Controls:

* Save Preset
* Estimate Leads (dynamic count)
* Launch Apollo Scraper

---

## 🟢 Apify Filters (Advanced Configuration)

### 📍 Location Filters:

* Search Terms
* Location (city/state/zip)
* Radius (miles)
* Industry Category
* Exclude Keywords

### ⭐ Quality Filters:

* Minimum Reviews Required (dropdown)
* Minimum Rating (dropdown)
* Max Listings to Pull
* Delay Between Requests (seconds)
* ☑️ Extract Contact Info (email, phone, website)

### ⚙️ Controls:

* Save Preset
* Estimate Listings
* Launch Apify Scraper

---

## 🟣 PhantomBuster Filters (Professional Setup)

### 🧑 Contact Filters:

* Platform (LinkedIn, X \[formerly Twitter])
* Keywords (title-style search)
* Connection Degree (1st, 2nd, 3rd)
* Seniority Level
* Department/Function

### 🏢 Company Filters:

* Industry
* Company Size
* Location

### ⚙️ Execution Settings:

* Execution Method (Use YoBot Dashboard / Use Phantom Browser / Re-run Mode)
* Daily Connection Limit (e.g. 100)
* ☑️ Auto-connect With Message
* Connection Message (Template field)
* Retry Attempts

### ⚙️ Controls:

* Save Preset
* Preview Summary
* Launch Phantom Scraper

---

## 🧑‍🎨 NEW: Embedded Content Creator Module (Marketing Tool)

> Purpose: Give team members the ability to write flyers, social posts, and schedule Mailchimp campaigns **directly inside the dashboard**, without needing to log in elsewhere.

### Features:

* ✍️ Content Drafting UI

  * Rich text editor w/ headline, body, CTA
  * Drag-and-drop template builder
  * Emoji + branded color selector

* 🖼️ Asset Upload + Preview

  * Upload image/video for post
  * Preview format (Facebook, Instagram, Email)

* 📤 Publish Options:

  * 📅 Schedule post now/later
  * Platform selector (IG, FB, X, LinkedIn, Mailchimp)
  * Test Mode toggle (test send to Slack/email)

* 🔁 Campaign Logger → Airtable

  * Logs post title, content, platform, target audience, and status to `📣 Social Campaign Log` (tblKMu76LOBA6OZmf)

* 🛠️ Mailchimp Integration:

  * API key pulled from secure Replit ENV
  * Uses Mailchimp Campaign API to schedule/send
  * Option to auto-sync content from CRM fields (e.g., client name, vertical)

---

## 🟢 Required Replit-Side Components (ALL SYSTEMS)

### 🔗 1. `/api/launch-scrape` (POST)

Handles all 3 platforms dynamically:

```json
{
  "tool": "apollo",  // or "apify", "phantom"
  "filters": { ... }  // full object of scraper config
}
```

* Triggers real scraper pipeline
* Returns: `{ success: true, leadCount: 128, leads: [...] }`
* Logs test to Airtable below

### 📤 2. Airtable Test Logger (Scraper + Any Flow)

```js
await fetch("https://api.airtable.com/v0/appRt8V3tH4g5Z5if/Integration%20Test%20Log", {
  method: "POST",
  headers: {
    "Authorization": `Bearer ${AIRTABLE_TOKEN}`,
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    fields: {
      "🧪 Integration Name": "Apollo Lead Scraper",
      "✅ Pass/Fail": true,
      "📝 Notes / Debug": "Validated Slack + Airtable",
      "📅 Test Date": new Date().toISOString(),
      "👤 QA Owner": "Daniel Sharpe",
      "📤 Output Data Populated?": true,
      "📁 Record Created?": true,
      "🔁 Retry Attempted?": false,
      "⚙️ Module Type": "Scraper",
      "🔗 Related Scenario Link": "https://replit.com/@YoBot/lead-scraper"
    }
  })
});
```

### 📩 3. Slack Webhook (On Success)

```js
await fetch("https://hooks.slack.com/services/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", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    text: `✅ ${leadCount} leads scraped with *Apollo*\n📥 Saved to Airtable · 🔗 <view URL>`
  })
});
```

### 📤 4. Airtable Sync (Scraped Leads)

```js
POST https://api.airtable.com/v0/appRt8V3tH4g5Z5if/tblLDB2yFEdVvNlxr
Headers: Authorization, Content-Type
Body:
{
  "fields": {
    "🧑 Full Name": lead.fullName,
    "✉️ Email": lead.email,
    "🏢 Company Name": lead.company,
    "💼 Title": lead.title,
    "🌍 Location": lead.location,
    "📞 Phone Number": lead.phone,
    "🏭 Industry": lead.industry,
    "🔖 Source Tag": `${source} - ${Date}`,
    "🆔 Scrape Session ID": `scraper-${Date.now()}`,
    "🕒 Scraped Timestamp": new Date().toISOString()
  }
}
```

### 📦 Optional: Export CSV

* Endpoint to bundle returned leads into downloadable CSV for client export
* Triggered by button in Intelligence Results view

---

## ✅ UX & Testing Expectations

* All components must log real test output
* No fake test JSON allowed unless `Test Company` toggle is active
* Use test tag in Airtable if run is from demo mode
* All failed tests (e.g. API timeout) must be logged with retry status = false
* Add notes to canvas/log for known issues: false UI success, dummy data loading instead of real scrape, button behavior mismatches, unlogged retries, etc.

---

## 🏁 Global Go-Live Rules

| Requirement                             | ✅ Must Have |
| --------------------------------------- | ----------- |
| Real API scraping working               | ✅           |
| Slack alert with lead count             | ✅           |
| Airtable sync to correct table          | ✅           |
| Test log in `Integration Test Log`      | ✅           |
| Toggle for Test vs Live company mode    | ✅           |
| CSV export button from results screen   | ✅           |
| Embedded flyer + social media module    | ✅           |
| Mailchimp API integration via dashboard | ✅           |

Once this is done — YoBot has a production-grade scraper and marketing automation suite ready for enterprise rollout.
