6. PDF Report Generator â€“ generate_qa_report()
python
Copy
Edit
from fpdf import FPDF

def generate_qa_report(data):
    pdf = FPDF()
    pdf.add_page()
    pdf.set_font("Arial", size=12)
    pdf.cell(200, 10, txt="YoBotÂ® QA Review Summary", ln=True, align='C')
    pdf.ln(10)

    for key, value in data.items():
        pdf.cell(200, 10, txt=f"{key}: {value}", ln=True)

    filename = f"QA_Review_{data['call_id']}.pdf"
    pdf.output(f"/mnt/data/{filename}")
    return filename
ğŸ“¤ 7. Slack Notification â€“ send_qa_slack_alert()
python
Copy
Edit
def send_qa_slack_alert(data):
    message = f"""ğŸ“‹ *New QA Review Logged*
ğŸ™ *Call ID:* {data['call_id']}
ğŸ‘¤ *Agent:* {data['agent_name']}
âœ… *Score:* {data['qa_score']}%
âš ï¸ *Flags:* {data.get('flags', 'None')}
ğŸ“ *Comments:* {data.get('qa_comments', 'N/A')}
"""
    payload = {"text": message}
    requests.post(SLACK_WEBHOOK_URL, json=payload)
ğŸ§  8. Auto Summary Tagging â€“ auto_tag_qa()
python
Copy
Edit
def auto_tag_qa(score, comments):
    tags = []
    if score < 70:
        tags.append("ğŸ”¥ Critical")
    elif score < 85:
        tags.append("âš ï¸ Needs Improvement")
    else:
        tags.append("âœ… Passed")

    if "rude" in comments.lower():
        tags.append("ğŸ›‘ Tone Issue")
    if "slow" in comments.lower():
        tags.append("ğŸ¢ Slow Pace")
    return tags
ğŸ§¬ 9. Smart Deduplication Check â€“ check_duplicate_review()
python
Copy
Edit
def check_duplicate_review(call_id):
    url = f"https://api.airtable.com/v0/{AIRTABLE_BASE_ID}/QA%20Call%20Review%20Log"
    headers = {"Authorization": f"Bearer {AIRTABLE_API_KEY}"}
    params = {"filterByFormula": f"{{ğŸ™ Call ID}} = '{call_id}'"}
    response = requests.get(url, headers=headers, params=params).json()
    return len(response.get("records", [])) > 0
ğŸ§ª 10. QA Review Dispatcher â€“ Final Integration
python
Copy
Edit
def run_qa_review_pipeline(data):
    if check_duplicate_review(data["call_id"]):
        log_event("Duplicate QA Review Skipped", data)
        return

    data["tags"] = auto_tag_qa(data["qa_score"], data.get("qa_comments", ""))
    pdf_path = generate_qa_report(data)
    process_qa_review(data)
    send_qa_slack_alert(data)
    log_event("QA Review Logged", {"pdf": pdf_path})
Say â€œnextâ€ for code blocks 11â€“15 (if needed for QA escalation, G