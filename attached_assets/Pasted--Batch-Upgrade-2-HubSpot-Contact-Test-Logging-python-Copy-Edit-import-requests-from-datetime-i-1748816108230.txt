âœ… Batch Upgrade #2 â€” HubSpot Contact Test + Logging
python
Copy
Edit
import requests
from datetime import datetime

AIRTABLE_API_KEY = "your_airtable_key"
BASE_ID = "your_base_id"
TABLE_NAME = "ğŸ§ª Integration Test Log"

def log_test_to_airtable(name, status, notes, module_type="Core Automation", link=""):
    url = f"https://api.airtable.com/v0/{BASE_ID}/{TABLE_NAME}"
    headers = {
        "Authorization": f"Bearer {AIRTABLE_API_KEY}",
        "Content-Type": "application/json"
    }
    data = {
        "fields": {
            "ğŸ”§ Integration Name": name,
            "âœ… Pass/Fail": status,
            "ğŸ§  Notes / Debug": notes,
            "ğŸ“… Test Date": datetime.today().strftime("%Y-%m-%d"),
            "ğŸ§‘â€ğŸ’» QA Owner": "Tyson",
            "ğŸ“¤ Output Data Populated": True,
            "ğŸ—ƒï¸ Record Created?": True,
            "ğŸ” Retry Attempted?": False,
            "ğŸ§© Module Type": module_type,
            "ğŸ“‚ Related Scenario Link": link
        }
    }
    r = requests.post(url, headers=headers, json=data)
    print("âœ… Airtable log posted" if r.status_code == 200 else f"âŒ Airtable log failed: {r.status_code} {r.text}")

def test_hubspot_contact():
    HUBSPOT_API_KEY = "your_hubspot_key"
    url = "https://api.hubapi.com/crm/v3/objects/contacts"
    headers = {
        "Authorization": f"Bearer {HUBSPOT_API_KEY}",
        "Content-Type": "application/json"
    }
    data = {
        "properties": {
            "email": "testcontact@yobot.bot",
            "firstname": "Test",
            "lastname": "Bot"
        }
    }
    try:
        r = requests.post(url, headers=headers, json=data)
        if r.status_code == 201:
            print("âœ… HubSpot contact created")
            log_test_to_airtable("CRM Contact Capture", "âœ…", "Contact created successfully")
        else:
            raise Exception(f"HubSpot error: {r.status_code} {r.text}")
    except Exception as e:
        log_test_to_airtable("CRM Contact Capture", "âŒ", str(e))

test_hubspot_contact()
âœ… Batch Upgrade #3 â€” Booking Link Slack Trigger + Logging
python
Copy
Edit
def test_booking_link_alert():
    SLACK_WEBHOOK_URL = "https://hooks.slack.com/services/XXX/YYY/ZZZ"  # Your live one
    payload = {
        "text": "ğŸ“… Booking Link Sent: https://calendly.com/yobot/30min",
        "username": "YoBot Scheduler",
        "icon_emoji": ":calendar:"
    }
    try:
        r = requests.post(SLACK_WEBHOOK_URL, json=payload)
        if r.status_code == 200:
            print("âœ… Booking link sent")
            log_test_to_airtable("Booking Link Trigger", "âœ…", "Calendly link posted to Slack")
        else:
            raise Exception(f"Slack failed: {r.status_code} {r.text}")
    except Exception as e:
        log_test_to_airtable("Booking Link Trigger", "âŒ", str(e))

test_booking_link_alert()