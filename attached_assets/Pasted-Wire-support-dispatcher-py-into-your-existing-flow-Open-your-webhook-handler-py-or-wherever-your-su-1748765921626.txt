Wire support_dispatcher.py into your existing flow
Open your webhook_handler.py (or wherever your support reply is triggered) and insert this at the end of the reply flow, right after the MP3 is generated.

Add this inside your main reply handler:
python
Copy
Edit
from support_dispatcher import dispatch_support_response

# After ai_reply and MP3 are ready
dispatch_support_response(
    ticket_id=ticket_id,
    client_name=client_name,
    topic=ticket_topic,
    ai_reply=ai_reply,
    escalation_flag=escalation_flag,
    sentiment=sentiment,
    mp3_filename=f"{ticket_id}_reply.mp3"
)
ðŸ”§ STEP 4: Update support_dispatcher.py to use function call
Replace the script you pasted earlier with this final version that works as a callable function:

python
Copy
Edit
# support_dispatcher.py

from slack_sdk import WebClient
from slack_sdk.errors import SlackApiError
from pyairtable import Table
import os

SLACK_TOKEN = os.getenv("SLACK_BOT_TOKEN")
AIRTABLE_API_KEY = os.getenv("AIRTABLE_API_KEY")
AIRTABLE_BASE_ID = os.getenv("AIRTABLE_BASE_ID")
AIRTABLE_TABLE_NAME = "ðŸ“„ Manual Review Queue"
SLACK_CHANNEL = "#support-queue"

slack_client = WebClient(token=SLACK_TOKEN)
airtable_table = Table(AIRTABLE_API_KEY, AIRTABLE_BASE_ID, AIRTABLE_TABLE_NAME)

def dispatch_support_response(ticket_id, client_name, topic, ai_reply, escalation_flag, sentiment, mp3_filename):
    try:
        # 1. Send Slack Message
        slack_client.chat_postMessage(
            channel=SLACK_CHANNEL,
            text=f"*ðŸŽŸ New AI Support Reply* for `{ticket_id}`:\n> {ai_reply}"
        )

        # 2. Upload MP3
        slack_client.files_upload(
            channels=SLACK_CHANNEL,
            file=f"./uploads/{mp3_filename}",
            filename=mp3_filename,
            title="ðŸŽ§ Voice Reply",
            initial_comment="Here's the MP3 reply from YoBot ðŸŽ™"
        )

        # 3. Log to Airtable
        airtable_table.create({
            "ðŸ†” Ticket ID": ticket_id,
            "ðŸ§‘ Client Name": client_name,
            "ðŸ“Œ Topic": topic,
            "ðŸ¤– AI Reply": ai_reply,
            "ðŸš© Escalation Flag": escalation_flag,
            "ðŸ“‰ Sentiment": sentiment,
            "ðŸŽ§ Voice File": "Uploaded to Slack"
        })

        print("âœ… Support response dispatched successfully.")

    except SlackApiError as e:
        print(f"Slack error: {e.response['error']}")
    except Exception as ex:
        print(f"Dispatch error: {str(ex)}")