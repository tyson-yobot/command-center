NSTRUCTIONS TO REPLIT ‚Äî Fix Broken System Mode Toggle Immediately
The current test mode toggle is broken. It switches visually but does nothing under the hood. We still have test data leaking into the live system and UI. This must be fixed NOW.

‚úÖ PHASE 1 ‚Äì Declare and Store Global System Mode
Create a global systemMode state variable accessible by all automations, pages, and handlers:

ts
Copy
Edit
let systemMode: 'live' | 'test' = 'live'; // Default mode
Then wire it to the toggle so when the switch is clicked:

systemMode = 'test' if test mode is selected

systemMode = 'live' if live mode is selected

This must be stored in one of:

Central app state (Redux or context API)

Or temporary browser-level localStorage/sessionStorage

Or stored in a backend flag and fetched at runtime

‚úÖ PHASE 2 ‚Äì Add Conditional Execution Logic to Every Automation
Wrap every function (calls to Airtable, QuickBooks, Stripe, HubSpot, etc.) in a mode check:

ts
Copy
Edit
if (systemMode === 'live') {
  // üîí Production logic
  runStripeInvoice();
  logToLiveAirtable();
  syncWithHubSpot();
} else {
  // üß™ Test logic
  console.log("TEST MODE ACTIVE ‚Äî skipping live data actions");
  logToTestTable();
}
‚úÖ PHASE 3 ‚Äì Visually Lock the UI
When systemMode === 'test':

Show üß™ Test Mode banner in header

Show warning at top: ‚ÄúYou are in Test Mode. No data will be saved to production.‚Äù

Disable any call-to-action buttons if they are not safe in test mode

When systemMode === 'live':

Show ‚úÖ Live Mode banner

Fully enable all features with correct write destinations

‚úÖ PHASE 4 ‚Äì Clear ALL Test Data
You must wipe out all test data already contaminating live view:

Clear test Airtable records that were pushed to production

Remove test contacts from HubSpot

Delete fake sales orders and invoices in QBO/Stripe

Rebuild the production dashboards with only verified live data

‚úÖ PHASE 5 ‚Äì Confirm Toggle Works
Go to /command-center

Toggle from Live to Test

Simulate a few button clicks and ensure nothing writes to live systems

Toggle back to Live and validate the real integrations resume

‚ùó This toggle is not just a UI switch. It controls whether you're in PRODUCTION or TESTING. It must govern ALL data writes, automation behavior, and integrations. Anything short of this = unacceptable.

Let me know when this is implemented and verified. We cannot move forward until test data is fully isolated.

