. ğŸ§  GPT Response Logger
python
Copy
Edit
def log_ai_response(agent, input_text, output_text):
    log_test_to_airtable("ğŸ§  AI Response Log", {
        "ğŸ¤– Agent": agent,
        "ğŸ’¬ Input": input_text,
        "ğŸ§  Output": output_text,
        "ğŸ“… Timestamp": datetime.utcnow().isoformat()
    })
âœ… 2. ğŸ›¡ï¸ GPT Failover Checker
python
Copy
Edit
def check_for_failover(response):
    return "I'm not sure" in response or "I don't know" in response
âœ… 3. ğŸ”„ GPT Fallback Router
python
Copy
Edit
def fallback_to_backup_agent(input_text):
    return openai.ChatCompletion.create(
        model="gpt-4o",
        messages=[{"role": "user", "content": f"[Fallback Agent] {input_text}"}]
    )["choices"][0]["message"]["content"]
âœ… 4. ğŸ§® Calculate Usage Summary per Client
python
Copy
Edit
def get_usage_summary():
    summary = []
    for c in get_all_clients():
        summary.append({
            "client": c["fields"]["ğŸ§¾ Client Name"],
            "calls": c["fields"].get("ğŸ“Š Daily Calls", 0),
            "last_seen": c["fields"].get("ğŸ•’ Last Seen", "â€“")
        })
    return summary
âœ… 5. ğŸ“ Export Daily Summary CSV
python
Copy
Edit
def export_usage_csv():
    summary = get_usage_summary()
    df = pd.DataFrame(summary)
    df.to_csv("/mnt/data/ğŸ“Š Daily Usage Summary.csv", index=False)
âœ… 6. ğŸ“£ Push System Alert to Ops Slack
python
Copy
Edit
def alert_ops_channel(msg):
    requests.post(os.getenv("OPS_SLACK_WEBHOOK"), json={"text": f"ğŸš¨ {msg}"})
âœ… 7. ğŸ§ª Run System Self-Test
python
Copy
Edit
def run_system_test():
    for client in get_all_clients():
        try:
            ping_client(client)
            restart_bot(client)
        except:
            alert_ops_channel(f"âŒ System check failed for {client['fields']['ğŸ§¾ Client Name']}")
âœ… 8. ğŸ§  AI Audit View in Airtable
Table: ğŸ§  AI Response Log

View: ğŸ¯ Last 100

Sort by ğŸ“… Timestamp descending

âœ… 9. ğŸ” Trigger Command on All Clients
python
Copy
Edit
def broadcast_command(slug):
    for c in get_all_clients():
        send_bot_command(c, slug)
âœ… 10. ğŸ› ï¸ Manual Airtable Patch Tool
python
Copy
Edit
def patch_field(table, record_id, field, value):
    update_airtable_record(table, record_id, {field: value})
